
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>

		<link rel="icon" type="image/png" href="assets/favicon.ico"/>

		<!-- GitHub icons and styles -->
		<link rel="stylesheet" href="assets/bower_components/octicons/octicons/octicons.css"/>

		<!-- Bootstrap -->
		<link rel="stylesheet" href="assets/bower_components/bootstrap/dist/css/bootstrap.min.css"/>
		<link rel="stylesheet" href="assets/bower_components/bootstrap/dist/css/bootstrap-theme.css"/>
		<script src="assets/bower_components/jquery/dist/jquery.min.js"></script>
		<script src="assets/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

		<!-- FontAwesome -->	
		<link rel="stylesheet" href="assets/bower_components/font-awesome/css/font-awesome.min.css"/>
		
		<!-- LiveReload (development) -->
		<script src="http://localhost:35729/livereload.js"></script>

		<!-- Twitter javascript -->
		<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

		<!-- Site styles -->
		<link rel="stylesheet" href="assets/css/style.css"/>
	</head>
	<body>
		<div class="header">
			<h2 class="brand"><a href="/site">Justin Manley</a></h2>
			<p>Coder, mapmaker, aspiring architecture critic, currently a student at the University of Chicago. I write about cities at <a href="http://outoftheyards.com.">outoftheyards.com</a>.</p>	
		</div>
		<div class="navbar" role="navigation">
			<div class="container-fluid">
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-links">
						<span class="sr-only">Toggle Navigation</span>
					</button>
				</div>
				<div class="collapse navbar-collapse" id="nav-links">
					<ul class="nav navbar-nav">
					
						<li><a href="https://github.com/manleyjster">GitHub</a></li>
					
						<li><a href="/site/blog">Blog</a></li>
					
						<li><a href="http://outoftheyards.com">Out of the Yards</a></li>
					
						<li><a href="http://justinmanley.portfoliobox.me/">Portfolio</a></li>
					
						<li><a href="/site/demos">Demos</a></li>
					
						<li><a href="/site/archive">Archive</a></li>
					
					</ul>
				</div>
			</div>
		</div>
		

<div class="container-fluid">
	<div class="row">
		
			<div class="col-md-8 col-md-push-4 article">
				<article>
  <h3 class="article-title">MapKnitter Annotations: First Live Release</h3>
  <div class="article-info">
    <time class="article-date">September 1, 2014</time>
    <div class="article-source">
      Originally published on 
      <a href="http://publiclab.org/profile/justinmanley">Public Lab</a>
    </div>
  </div>
  <div class="article-body"><p><img src='http://i.publiclab.org/system/images/photos/000/006/541/medium/mapknitter-3.png'/><br /> ### First Live Release! ###</p>
<p>The first pre-beta of the new MapKnitter interface is live!  Try it out at <a href="http://test.publiclab.org:3000/">test.publiclab.org:3000</a>.</p>
<p><br /></p>
<div class="text-center"><a class="btn btn-primary btn-large" href="http://test.publiclab.org:3000/">Try the new MapKnitter</a></div>

<p><br /></p>
<p>Please do note that this is an early release and that the following features, among others, have not yet been implemented.</p>
<ul>
<li>map deletion</li>
<li>anonymous map creation and editing</li>
<li>map export</li>
</ul>
<p>In addition, only those pages which are essential to creating and viewing new maps have been refactored using the new interface.</p>
<p><a href="http://i.publiclab.org/system/images/photos/000/006/542/original/mapknitter-1.png"><img src="http://i.publiclab.org/system/images/photos/000/006/542/medium/mapknitter-1.png" alt="mapknitter-1.png"/></a></p>
<p><a href="http://i.publiclab.org/system/images/photos/000/006/543/original/mapknitter-3.png"><img src="http://i.publiclab.org/system/images/photos/000/006/543/medium/mapknitter-3.png" alt="mapknitter-3.png"/></a></p>
<h3 id="background">Background</h3>
<p>I am working to add rich annotation functionality to MapKnitter as part of Google Summer of Code (read about my project here: <a href="http://publiclab.org/notes/justinmanley/03-18-2014/mapknitter-annotations-using-fabric-js-gsoc-2014-proposal">http://publiclab.org/notes/justinmanley/03-18-2014/mapknitter-annotations-using-fabric-js-gsoc-2014-proposal</a>).</p>
<p>The goal of this research note is to provide an update to the community on my progress with refactoring the MapKnitter interface.</p>
<p>You can check out our previous discussion of this interface refactoring in my previous research notes:</p>
<p><a href="http://publiclab.org/notes/justinmanley/08-06-2014/mapknitter-annotations-interface-refactoring">August 6, 2014 - MapKnitter Annotations: Interface Refactoring</a> </p>
<p><a href="http://publiclab.org/notes/justinmanley/08-19-2014/mapknitter-annotations-interface-refactoring-underway">August 19, 2014 - MapKnitter Annotations: Interface Refactoring Underway</a></p>
<h3 id="progress">Progress</h3>
<p>Since my last research note, I've:</p>
<ul>
<li>Refactored some of the code handling warpables (uploaded images)</li>
<li>Integrated @xvidun's file upload interface (based on <a href="https://github.com/blueimp/jQuery-File-Upload">jQuery-File-Upload</a>).</li>
<li>Enabled <code>Leaflet.Illustrate</code> and <code>Leaflet.Draw</code> in map viewing mode.</li>
<li>Enabled warpable drag-and-drop from the sidebar onto the map.</li>
</ul>
<p>I haven't yet been able to integrate @xvidun's autoplacement features yet because those depend on Cartagen (@xvidun's autoplacement code calls <code>new_image</code> and <code>new_image_GPS</code> from Cartagen).  Unfortunately, the <code>Element.hide()</code> method in Cartagen breaks Bootstrap dropdown menus (presumably because it conflicts with jQuery's <code>hide()</code> method, so it doesn't seem to be a sustainable in the long-term.</p>
<h3 id="up-next">Up Next</h3>
<p>I've spent a lot of time over the past month doing a general overhaul of the MapKnitter editing interface.  Now, I'm going to return to my own project - MapKnitter annotations.  I'm going to work over the next few weeks on integrating the work that I've done on <code>Leaflet.Illustrate</code> into the new Leaflet-based MapKnitter interface.  This will involve:</p>
<ul>
<li>Defining <code>toGeoJSON</code> for <code>Leaflet.Illustrate</code> annotations, deciding how <code>Leaflet.Illustrate</code> and <code>Leaflet.draw</code> objects will be stored in the MapKnitter database, and writing migrations and a new ActiveRecord model to handle them.</li>
<li>Adding to the <code>Leaflet.Illustrate</code> user interface to allow people to pick different colors, fonts, etc. for their annotations.</li>
</ul>
<p>I also <em>really</em> want to work on integrating Anish's ImageDistortLeaflet plugin into MapKnitter, since the ability to distort images placed on the map is absolutely the core functionality of MapKnitter.  This will be my primary focus as soon as I've spent some time working on annotations.</p>
</div>
</article>

			</div>
		

		
			<div class="col-md-4 col-md-pull-8 feed">
				<div class="event github-event">
  <span class="mega-octicon octicon-mark-github content-src-icon"></span>
  <!-- push -->
<span class="mega-octicon octicon-git-commit"></span>

<div class="time">
  <time datetime="2014-09-10T04:13:59Z" is="relative-time">September 10, 2014</time>
</div>

<div class="title">
  <a href="https://github.com/manleyjster">manleyjster</a> <span>pushed</span> to <a href="/manleyjster/Leaflet.Illustrate/tree/master">master</a> at <a href="https://github.com/manleyjster/Leaflet.Illustrate" class="css-truncate css-truncate-target">manleyjster/Leaflet.Illustrate</a>
</div>

<div class="details">
  <a href="https://github.com/manleyjster"><img alt="Justin Manley" class="gravatar" data-user="1668487" height="30" src="https://avatars3.githubusercontent.com/u/1668487?v=2&amp;s=60" width="30" /></a>

    <div class="commits pusher-is-only-committer">
      <ul>
        <li>
          <span title="manleyjster">
            <img alt="Justin Manley" data-user="1668487" height="16" src="https://avatars2.githubusercontent.com/u/1668487?v=2&amp;s=32" width="16" />
          </span>
          <code><a href="/manleyjster/Leaflet.Illustrate/commit/577285bea954859afabf1f409627c168ffcfb978">577285b</a></code>
          <div class="message">
            <blockquote>
              Remove call to #getRotation in #toGeoJSON temporarily in order to tes…
            </blockquote>
          </div>
        </li>
      </ul>
    </div>
</div>

</div>
<div class="event github-event">
  <span class="mega-octicon octicon-mark-github content-src-icon"></span>
  <!-- push -->
<span class="mega-octicon octicon-git-commit"></span>

<div class="time">
  <time datetime="2014-09-08T23:24:59Z" is="relative-time">September 08, 2014</time>
</div>

<div class="title">
  <a href="https://github.com/manleyjster">manleyjster</a> <span>pushed</span> to <a href="/manleyjster/Leaflet.Illustrate/tree/master">master</a> at <a href="https://github.com/manleyjster/Leaflet.Illustrate" class="css-truncate css-truncate-target">manleyjster/Leaflet.Illustrate</a>
</div>

<div class="details">
  <a href="https://github.com/manleyjster"><img alt="Justin Manley" class="gravatar" data-user="1668487" height="30" src="https://avatars3.githubusercontent.com/u/1668487?v=2&amp;s=60" width="30" /></a>

    <div class="commits pusher-is-only-committer">
      <ul>
        <li>
          <span title="manleyjster">
            <img alt="Justin Manley" data-user="1668487" height="16" src="https://avatars2.githubusercontent.com/u/1668487?v=2&amp;s=32" width="16" />
          </span>
          <code><a href="/manleyjster/Leaflet.Illustrate/commit/ffe857b0653099b4f3435079b644c71fea6f33a9">ffe857b</a></code>
          <div class="message">
            <blockquote>
              Add listeners to textbox so that 'draw:edited' event fires when the u…
            </blockquote>
          </div>
        </li>
      </ul>
    </div>
</div>

</div>
<div class="event github-event">
  <span class="mega-octicon octicon-mark-github content-src-icon"></span>
  <!-- issue_comment -->
<span class="mega-octicon octicon-comment-discussion"></span>

<div class="time">
  <time datetime="2014-09-08T15:25:31Z" is="relative-time">September 08, 2014</time>
</div>

<div class="title">
  <a href="https://github.com/manleyjster">manleyjster</a> <span>commented</span> on pull request <a href="https://github.com/publiclab/mapknitter/pull/22#issuecomment-54837235" title="MapKnitter refactoring">publiclab/mapknitter#22</a>
</div>

<div class="details">
  <a href="https://github.com/manleyjster"><img alt="Justin Manley" class="gravatar" data-user="1668487" height="30" src="https://avatars3.githubusercontent.com/u/1668487?v=2&amp;s=60" width="30" /></a>
  <div class="message markdown-body">
    <blockquote>
      <p><a href="https://github.com/lotelx" class="user-mention">@lotelx</a> Thanks for the feedback. I've added everything I think is a MapKnitter issue to the todo list at the top. I think your issue with two-finge…</p>
    </blockquote>
  </div>
</div>

</div>
<div class="event github-event">
  <span class="mega-octicon octicon-mark-github content-src-icon"></span>
  <!-- pull_request -->
<span class="mega-octicon octicon-git-pull-request"></span>

<div class="time">
  <time datetime="2014-09-05T18:27:21Z" is="relative-time">September 05, 2014</time>
</div>

<div class="title">
  <a href="https://github.com/manleyjster">manleyjster</a> <span>opened</span> pull request <a href="https://github.com/Leaflet/Leaflet/pull/2889">Leaflet/Leaflet#2889</a>
</div>

<div class="details">
  <a href="https://github.com/manleyjster"><img alt="Justin Manley" class="gravatar" data-user="1668487" height="30" src="https://avatars3.githubusercontent.com/u/1668487?v=2&amp;s=60" width="30" /></a>
  <div class="message">
    <blockquote>Add L.Layer#geoJSONProperties for easier custom GeoJSON generation.</blockquote>
      <div class="pull-info">
        <span class="octicon octicon-git-commit"></span>
        <em>2</em> commits with
        <em>38</em> additions and
        <em>7</em> deletions
      </div>
  </div>
</div>

</div>
<div class="event publiclab-event">
  <time class="time">September 1, 2014</time>
  <div class="title">
    <a href="http://publiclab.org/profile/justinmanley">justinmanley</a>
    <span> posted </span>
    <a href="http://publiclab.org//notes/justinmanley/09-02-2014/mapknitter-annotations-first-live-release">MapKnitter Annotations: First Live Release</a>
  </div>
</div>
<div class="event publiclab-event">
  <time class="time">August 19, 2014</time>
  <div class="title">
    <a href="http://publiclab.org/profile/justinmanley">justinmanley</a>
    <span> posted </span>
    <a href="http://publiclab.org//notes/justinmanley/08-19-2014/mapknitter-annotations-riffle-data-as-map-annotations">MapKnitter Annotations: Riffle Data as Map Annotations</a>
  </div>
</div>
<div class="event publiclab-event">
  <time class="time">August 18, 2014</time>
  <div class="title">
    <a href="http://publiclab.org/profile/justinmanley">justinmanley</a>
    <span> posted </span>
    <a href="http://publiclab.org//notes/justinmanley/08-19-2014/mapknitter-annotations-interface-refactoring-underway">MapKnitter Annotations: Interface Refactoring Underway</a>
  </div>
</div>
<div class="event publiclab-event">
  <time class="time">July 29, 2014</time>
  <div class="title">
    <a href="http://publiclab.org/profile/justinmanley">justinmanley</a>
    <span> posted </span>
    <a href="http://publiclab.org//notes/justinmanley/07-29-2014/mapknitter-annotations-version-0-0-2-released-with-l-illustrate-textbox-and-l-illustrate-pointer">MapKnitter Annotations: Version 0.0.2 released with L.Illustrate.Textbox and L.Illustrate.Pointer</a>
  </div>
</div>
<div class="event publiclab-event">
  <time class="time">July 14, 2014</time>
  <div class="title">
    <a href="http://publiclab.org/profile/justinmanley">justinmanley</a>
    <span> posted </span>
    <a href="http://publiclab.org//notes/justinmanley/07-14-2014/mapknitter-annotations-leaflet-illustrate-edithandle-and-leaflet-illustrate-pointer">MapKnitter Annotations: Leaflet.Illustrate.EditHandle and Leaflet.Illustrate.Pointer</a>
  </div>
</div>
<div class="event publiclab-event">
  <time class="time">July 1, 2014</time>
  <div class="title">
    <a href="http://publiclab.org/profile/justinmanley">justinmanley</a>
    <span> posted </span>
    <a href="http://publiclab.org//notes/justinmanley/07-02-2014/mapknitter-annotations-textbox-rotation-using-css-transforms">MapKnitter Annotations: Textbox Rotation using CSS Transforms</a>
  </div>
</div>

			</div>
						
	</div>
</div>
		<footer class="footer">
			<div class="social-media">
				<a href="www.linkedin.com/in/justinmanley/" target="_blank">
					<span class="fa fa-linkedin"></span>
				</a>
				<a href="https://github.com/manleyjster" target="_blank">
					<span class="fa fa-github"></span>
				</a>
				<a href="https://twitter.com/outoftheyards" target="_blank">
					<span class="fa fa-twitter"></span>
				</a>
				<a href="mailto:manleyjster@gmail.com" target="_blank">
					<span class="fa fa-envelope"></span>
				</a>		
			</div>
			<div class="attributions">
				<p>This site was generated on Sep 10th, 2014 with <a href="http://gruntjs.com/">Grunt</a> and <a href="http://assemble.io/">Assemble</a> using fonts and icons from <a href="http://glyphicons.com/">Glyphicons</a>, <a href="http://fortawesome.github.io/Font-Awesome/">Font Awesome</a>, and <a href="https://www.theleagueofmoveabletype.com/">The League of Moveable Type</a>.</p>
				
			</div>		
		</footer>	
	</body>
</html>